<!DOCTYPE html>
<html lang="de">
<head>
        <meta charset="utf-8">
        <title>tech.x4343 - Misc</title>
        <link rel="stylesheet" href="http://tech.x4343.org/theme/css/main.css">
                
        <!--[if IE]>
            <script src="http://html5shiv.googlecode.com/svn/trunk/html5.js"></script>
        <![endif]-->
	<!-- Using MathJax, with the delimiters $ -->
	<!-- Conflict with pygments for the .mo and .mi -->
	<script type="text/x-mathjax-config">
	  MathJax.Hub.Config({
	  "HTML-CSS": {
	  styles: {
	  ".MathJax .mo, .MathJax .mi": {color: "black ! important"}}
	  },
	  tex2jax: {inlineMath: [['$','$'], ['\\(','\\)']],processEscapes: true}
	  });
	  MathJax.Hub.Register.StartupHook("HTML-CSS Jax Ready",function () {
	  var VARIANT = MathJax.OutputJax["HTML-CSS"].FONTDATA.VARIANT;
	  VARIANT["normal"].fonts.unshift("MathJax_SansSerif");
	  VARIANT["bold"].fonts.unshift("MathJax_SansSerif-bold");
	  VARIANT["italic"].fonts.unshift("MathJax_SansSerif-italic");
	  VARIANT["-tex-mathit"].fonts.unshift("MathJax_SansSerif-italic");
	  });
	  MathJax.Hub.Register.StartupHook("SVG Jax Ready",function () {
	  var VARIANT = MathJax.OutputJax.SVG.FONTDATA.VARIANT;
	  VARIANT["normal"].fonts.unshift("MathJax_SansSerif");
	  VARIANT["bold"].fonts.unshift("MathJax_SansSerif-bold");
	  VARIANT["italic"].fonts.unshift("MathJax_SansSerif-italic");
	  VARIANT["-tex-mathit"].fonts.unshift("MathJax_SansSerif-italic");
	  });
	</script>

	<script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS_HTML"></script>
</head>

<body id="index" class="home">
        <header id="banner" class="body">
                <h1><a href="http://tech.x4343.org/">tech.x4343 </a></h1>
                <nav><ul>
                                                                                    <li class="active"><a href="http://tech.x4343.org/category/misc.html">Misc</a></li>
                                    <li ><a href="http://tech.x4343.org/category/rpi.html">RPi</a></li>
                                                </ul></nav>
        </header><!-- /#banner -->
                
            

                            <aside id="featured" class="body">
                <article>
                    <h1 class="entry-title"><a href="http://tech.x4343.org/pulsed-infrared-connection-as-stay-alive-signal.html">Pulsed Infrared Connection as Stay-Alive Signal</a></h1> 
                    <footer class="post-info">
        <abbr class="published" title="2013-08-05T20:40:00">
                Mon 05 August 2013
        </abbr>

                <address class="vcard author">
                By <a class="url fn" href="http://tech.x4343.org/author/x4343.html">x4343</a>
        </address>
        <p>In <a href="http://tech.x4343.org/category/misc.html">Misc</a>. </p>
<p>tags: <a href="http://tech.x4343.org/tag/attiny85.html">attiny85</a><a href="http://tech.x4343.org/tag/infrared.html">infrared</a><a href="http://tech.x4343.org/tag/fluke.html">fluke</a><a href="http://tech.x4343.org/tag/pulsed.html">pulsed</a></p>
</footer><!-- /.post-info --><h1>The project</h1>
<p>I got asked a while ago I can build some lightning which is automatically switched by the staircase lightning.
So if s.o. switches the staircase lightning on, some LEDs should illuminate the wall-attached flower pots.</p>
<p>This could be easily done by switching a 5V power supply.
On the other side of the staircase are also some flower pots, but no power supply at all. As they should also be illuminated, I have to built
something with a battery pack, e.g.</p>
<p>The main question is: <strong>How to switch the LEDs on the other side on and off?</strong>
So this is a typical master/slave communication.</p>
<p>The master is connected to the houses power supply and has constantly the state of the staircase lightning.
If it's on, it has to send a signal to the opposed slave. The opposed slave is switching its LEDs on as long as the signal is transmitted. I name it <em>stay-alive signal</em>.</p>
<p>I could have also used a single signal for 'on' and 'off', so only status changes are transmitted. Analog to an edge-triggered oscilloscope.
But there's a huge disadvantage: e.g. the 'off' signal is somehow not sent or received by the slave, it will wrongly stay on as long as some switches the staircase lightning 'on' and 'off' again
(and this may take a long time in the worst case). Since the slave is only powered by a battery pack, this setup may be of short pleasure.</p>
<p>That's so far the project's description.
Overall there a some technical details to clarify:</p>
<h2>What LEDs suit best?</h2>
<p>Requirement: Warm, white passive light.</p>
<p>I took some 5 mm waarm white straw hat LEDs with the following characteristics:</p>
<ul>
<li>$ U_{LED}=3,3 V $</li>
<li>$ I_{max}=20 mA $</li>
<li>$Color Temp.=3000 K$</li>
<li>$I_{V}= 2000 mcd$</li>
<li>$\omega = 100^{\circ}$</li>
<li>Price: 0.25 EUR pc.</li>
</ul>
<h2>Master/Slave connection via wireless or infrared?</h2>
<h3>Wireless transmitter</h3>
<p>Because there are a lot of cheap 433 MHz Transmit-Receiver components at ebay for a few dollars, I first considered using them for the connection between both units.
But since I wanted to keep the solution smart and simple, and the 433 MHz things need an Arduino to work, I discarded the idea.
Even the Attiny85 - which I truly like for small projects - cannot handle the needed library. The 433 MHz things may be nice for further projects to transfer a lot of data instead of a simple
alive-signal, but for this project they a really to much.</p>
<p>The next problem is, that I didn't found anything about power consumption, which should be - at least on the slave - as low as possible.</p>
<h3>Infrared</h3>
<p>I came up with the solution to use infrared by pure chance. <em>"Why not doing it like all the TV manufactures are doing for several decades to switch their devices on and off?"</em>
Infrared is cheap, easy to implement and widely available. I found an <a href="http://www.vishay.com/docs/82013/tsop12xx.pdf">TSOP 1138</a> receiver 
in an old television and somewhere near a used IR diode (type CQY 99).
Luckily they are both working together in perfect harmony. I just have to pulse the IR diode in the desired frequency of $f_{IR}=38 kHz$.</p>
<h1>The solution</h1>
<p>Picture of the test lab:
<img alt="WEBSITE_DEBUG" src="/static/pictures/infrared/20130713_002b.jpg" style="width: 2592px; height: auto; max-width: 100%;"/></p>
<h1>Schematics, Code &amp; Analysis</h1>
<p>After some research, I found the following schematics are fullfilling all my needs:</p>
<p><strong>IR-Sender</strong></p>
<p><img alt="IR-Sender_Schematic" src="/static/pictures/infrared/IR_Sender_Schaltplan.png" style="width: 641px; height: auto; max-width: 100%;"/></p>
<p><strong>IR-Receiver</strong></p>
<p><img alt="IR-Receiver_Schematic" src="/static/pictures/infrared/IR_Receiver_Schaltplan.png" style="width: 1240px; height: auto; max-width: 100%;"/></p>
<p>After the successful practical test, I wanted to make some measurements with my borrowed oscilloscope.</p>
<p>The frequence is nearly 38 kHz (don't care about the measurement errors as they are the <em>2nd</em> and <em>3rd</em> multiple of the carrier frequency).</p>
<p><img alt="OSIC_spectrum_01" src="/static/pictures/infrared/fluke/spectrum_01.png" style="width: 1334px; height: auto; max-width: 100%;"/></p>
<h2>Some Graphs</h2>
<h3>Legend:</h3>
<p>Channel A (red) - IR-Sender</p>
<p>Channel B (blue) - IR-Receiver</p>
<p>Carrier frequency </p>
<p>$ T_{Pulse} = 27,2 \mu s$</p>
<p>$ f_{Pulse} = 36,76 Hz $</p>
<p><img alt="OSIC_graph_01b" src="/static/pictures/infrared/fluke/graph_01b.png" style="width: 1334px; height: auto; max-width: 100%;"/>
<img alt="OSIC_graph_01" src="/static/pictures/infrared/fluke/graph_01.png" style="width: 1334px; height: auto; max-width: 100%;"/></p>
<h3>IR-Receiver processing delay</h3>
<p>$ \triangle t_{delay} = 172 \mu s $</p>
<p><img alt="OSIC_graph_02b" src="/static/pictures/infrared/fluke/graph_02b.png" style="width: 1334px; height: auto; max-width: 100%;"/>
<img alt="OSIC_graph_02" src="/static/pictures/infrared/fluke/graph_02.png" style="width: 1334px; height: auto; max-width: 100%;"/></p>
<h3>Duty Cycle</h3>
<p>$ t_{off} = 34 ms$</p>
<p><img alt="OSIC_graph_03b" src="/static/pictures/infrared/fluke/graph_03b.png" style="width: 1334px; height: auto; max-width: 100%;"/>
<img alt="OSIC_graph_03" src="/static/pictures/infrared/fluke/graph_03.png" style="width: 1334px; height: auto; max-width: 100%;"/></p>
<p>$ t_{on} = 688 \mu s$</p>
<p>Duty Cycle $D = \frac{0.688 ms}{34.688 ms} = 0,0198 = 20 \% $</p>
<p><img alt="OSIC_graph_04b" src="/static/pictures/infrared/fluke/graph_04b.png" style="width: 1334px; height: auto; max-width: 100%;"/>
<img alt="OSIC_graph_04" src="/static/pictures/infrared/fluke/graph_04.png" style="width: 1334px; height: auto; max-width: 100%;"/></p>
<h3>Voltage peak...</h3>
<p>...without the shunt resistor --&gt; a peak of 1,64 V above the high level.
See <a href="http://andybrown.me.uk/wk/2011/07/09/building-the-phototrap-part-5-the-long-range-infra-red-beam-sensor/">here</a> for further explanation.</p>
<p><img alt="OSIC_graph_without_Resistor100b" src="/static/pictures/infrared/fluke/graph_without_Resistor100b.png" style="width: 1334px; height: auto; max-width: 100%;"/>
<img alt="OSIC_graph_without_Resistor100" src="/static/pictures/infrared/fluke/graph_without_Resistor100.png" style="width: 1334px; height: auto; max-width: 100%;"/></p>
<p>...with the shunt resistor $R_2 = 100 \Omega$ --&gt; a small peak about 0,3 V above the high level.</p>
<p><img alt="OSIC_graph_with_Resistor100b" src="/static/pictures/infrared/fluke/graph_with_Resistor100b.png" style="width: 1334px; height: auto; max-width: 100%;"/>
<img alt="OSIC_graph_with_Resistor100" src="/static/pictures/infrared/fluke/graph_with_Resistor100.png" style="width: 1334px; height: auto; max-width: 100%;"/></p>
<h2>Screenshots</h2>
<p><img alt="OSIC_Scr_01" src="/static/pictures/infrared/fluke/Scr_01.png" style="width: 336px; height: auto; max-width: 100%;"/>
<img alt="OSIC_Scr_02" src="/static/pictures/infrared/fluke/Scr_02.png" style="width: 336px; height: auto; max-width: 100%;"/>
<img alt="OSIC_Scr_03" src="/static/pictures/infrared/fluke/Scr_03.png" style="width: 336px; height: auto; max-width: 100%;"/>
<img alt="OSIC_Scr_04" src="/static/pictures/infrared/fluke/Scr_04.png" style="width: 336px; height: auto; max-width: 100%;"/>
<img alt="OSIC_Scr_05" src="/static/pictures/infrared/fluke/Scr_05.png" style="width: 336px; height: auto; max-width: 100%;"/>
<img alt="OSIC_Scr_06" src="/static/pictures/infrared/fluke/Scr_06.png" style="width: 336px; height: auto; max-width: 100%;"/>
<img alt="OSIC_Scr_07" src="/static/pictures/infrared/fluke/Scr_07.png" style="width: 336px; height: auto; max-width: 100%;"/>
<img alt="OSIC_Scr_08" src="/static/pictures/infrared/fluke/Scr_08.png" style="width: 336px; height: auto; max-width: 100%;"/></p>
<h1>Installation</h1>
<h1>Summary</h1>
<h1>Useful Links</h1>                </article>
                            </aside><!-- /#featured -->
                            <section id="content" class="body">
                    <h1>Other articles</h1>
                    <hr />
                    <ol id="posts-list" class="hfeed">
                                                

                 
                        <li><article class="hentry">    
                <header>
                    <h1><a href="http://tech.x4343.org/attiny85-programming-board.html" rel="bookmark"
                           title="Permalink to Attiny85 Programming Board">Attiny85 Programming Board</a></h1>
                </header>
                
                <div class="entry-content">
                <footer class="post-info">
        <abbr class="published" title="2013-07-29T19:12:00">
                Mon 29 July 2013
        </abbr>

                <address class="vcard author">
                By <a class="url fn" href="http://tech.x4343.org/author/x4343.html">x4343</a>
        </address>
        <p>In <a href="http://tech.x4343.org/category/misc.html">Misc</a>. </p>
<p>tags: <a href="http://tech.x4343.org/tag/attiny85.html">attiny85</a><a href="http://tech.x4343.org/tag/circuit_board.html">circuit_board</a></p>
</footer><!-- /.post-info -->                <p>Attiny85 Programming Board</p>
                <a class="readmore" href="http://tech.x4343.org/attiny85-programming-board.html">read more</a>
                                </div><!-- /.entry-content -->
            </article></li>
                            </ol><!-- /#posts-list -->
                            <p class="paginator">
        Page 1 / 1
    </p>
                        </section><!-- /#content -->
                    <section id="extras" class="body">
                        <div class="blogroll">
                        <h2>blogroll</h2>
                        <ul>
                                                    <li><a href="http://blog.fefe.de/">Fefe</a></li>
                                                </ul>
                </div><!-- /.blogroll -->
                                <div class="social">
                        <h2>social</h2>
                        <ul>
                            <li><a href="http://tech.x4343.org/None" type="application/atom+xml" rel="alternate">atom feed</a></li>
                            
                                                    <li><a href="#">Another social link</a></li>
                                                </ul>
                </div><!-- /.social -->
                </section><!-- /#extras -->

        <footer id="contentinfo" class="body">
                <address id="about" class="vcard body">
                Proudly powered by <a href="http://getpelican.com/">Pelican</a>, which takes great advantage of <a href="http://python.org">Python</a>.
                </address><!-- /#about -->

                <p>The theme is by <a href="http://coding.smashingmagazine.com/2009/08/04/designing-a-html-5-layout-from-scratch/">Smashing Magazine</a>, thanks!</p>
        </footer><!-- /#contentinfo -->

</body>
</html>